<mat-card class="cardWithShadow full-width">
    <mat-card-header>
        <mat-card-title class="m-b-0">Reportes</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <mat-tab-group>
            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon class="example-tab-icon">date_range</mat-icon>
                    Relacion de Conduces
                </ng-template>
                <div class="container mt-5 m-b-30" style="margin-top: 25px;">
                    <div class="row">

                        <!-- SELECT Escuela -->
                        <div class="col-12 col-md-6">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Escuela</mat-label>
                                <mat-select name="articuloid" [(ngModel)]="selectSchoolId" required
                                    #articuloid="ngModel">
                                    <mat-option value="0">Todas</mat-option>
                                    <mat-option *ngFor="let loc of escuelas" [value]="loc.id">
                                        {{ loc.nombre }}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="articuloid.invalid && articuloid.touched">
                                    Seleccione una escuela para continuar
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row g-2">
                        <div class="col-12 col-md-6">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Fecha Desde</mat-label>
                                <input matInput [matDatepicker]="picker" placeholder="Selecciona fecha"
                                    [(ngModel)]="selectedDate">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-12 col-md-6 d-flex align-items-center gap-2">
                            <!-- Datepicker -->
                            <mat-form-field appearance="outline" class="flex-grow-1">
                                <mat-label>Fecha Hasta</mat-label>
                                <input matInput [matDatepicker]="pickerTo" placeholder="Selecciona fecha"
                                    [(ngModel)]="fechaHastaDate" [disabled]="!fechaHasta" [min]="fechaMinimaHasta">
                                <mat-datepicker-toggle matSuffix [for]="pickerTo" [disabled]="!fechaHasta">
                                </mat-datepicker-toggle>
                                <mat-datepicker #pickerTo></mat-datepicker>
                            </mat-form-field>

                            <!-- Checkbox -->
                            <mat-checkbox style="margin-bottom: 9px;" class="ms-2" [(ngModel)]="fechaHasta"
                                name="fechaHasta">
                            </mat-checkbox>
                        </div>
                    </div>
                    <div class="row">
                        <!-- Botones a la izquierda -->
                        <div class="col-6 d-flex justify-content-start gap-2">
                            <button *ngIf="conduces.length > 0" class="actions-button btn-print" mat-raised-button
                                color="warn" (click)="imprimir()">
                                Imprimir
                            </button>
                        </div>

                        <!-- Botón a la derecha -->
                        <div class="col-6 d-flex justify-content-end">
                            <button mat-raised-button color="primary" class="option-button"
                                [disabled]="!selectSchoolId || !selectedDate || (this.fechaHasta && !this.fechaHastaDate)"
                                (click)="getRelacionConduce()">
                                Buscar
                            </button>
                        </div>
                    </div>
                </div>
                <div class="table-responsive" *ngIf="dataSource && dataSource.data.length > 0">
                    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8 w-100">

                        <!-- Nombre -->
                        <ng-container matColumnDef="fecha">
                            <th mat-header-cell mat-sort-header *matHeaderCellDef> Fecha </th>
                            <td mat-cell *matCellDef="let element"> {{ element.fecha |
                                date:'dd/MM/yyyy' }} </td>
                        </ng-container>

                        <!-- Dirección -->
                        <ng-container matColumnDef="conduce">
                            <th mat-header-cell mat-sort-header *matHeaderCellDef> Conduce </th>
                            <td mat-cell *matCellDef="let element"> {{ element.numeroConduce }} </td>
                        </ng-container>

                        <!-- Director -->
                        <ng-container matColumnDef="codigo">
                            <th mat-header-cell mat-sort-header *matHeaderCellDef> Cód. Escuela </th>
                            <td mat-cell *matCellDef="let element"> {{ element.codigoEscuela }} </td>
                        </ng-container>

                        <!-- Cantidad -->
                        <ng-container matColumnDef="escuela">
                            <th mat-header-cell mat-sort-header *matHeaderCellDef class="col-small"> Escuela </th>
                            <td mat-cell *matCellDef="let element" class="col-small"> {{ element.nombreEscuela }} </td>
                        </ng-container>

                        <!-- Precio -->
                        <ng-container matColumnDef="panes">
                            <th mat-header-cell mat-sort-header *matHeaderCellDef class="col-small"> Panes </th>
                            <td mat-cell *matCellDef="let element" class="col-small"> {{ element.a1 }} </td>
                        </ng-container>

                        <!-- Total -->
                        <ng-container matColumnDef="galletas">
                            <th mat-header-cell mat-sort-header *matHeaderCellDef class="col-small"> Galletas </th>
                            <td mat-cell *matCellDef="let element" class="col-small"> {{ element.a2 | number }} </td>
                        </ng-container>

                        <!-- Itbis -->
                        <ng-container matColumnDef="bizcochos">
                            <th mat-header-cell mat-sort-header *matHeaderCellDef class="col-small"> Bizcocho </th>
                            <td mat-cell *matCellDef="let element" class="col-small"> {{ element.a3 | number}} </td>
                        </ng-container>

                        <ng-container matColumnDef="vegetales">
                            <th mat-header-cell mat-sort-header *matHeaderCellDef class="col-small"> Vegetales </th>
                            <td mat-cell *matCellDef="let element" class="col-small"> {{ element.a4 | number}}
                            </td>
                        </ng-container>

                        <!-- Header y filas -->
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                    <mat-paginator [length]="dataSource.data.length" [pageSize]="25" [pageSizeOptions]="[5,10,25,50]">
                    </mat-paginator>

                </div>

            </mat-tab>

            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon class="example-tab-icon">attach_money</mat-icon>
                    Factura
                </ng-template>
                <div style="margin-top: 25px; margin-bottom: 20px;">
                    <span style="font-style:italic;">Coming soon</span>
                </div>
            </mat-tab>

            <!-- <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon class="example-tab-icon">thumb_up</mat-icon>
                    Third
                </ng-template>

                Content 3
            </mat-tab> -->
        </mat-tab-group>


    </mat-card-content>
</mat-card>

<ngx-loading [show]="loading" [config]="{ fullScreenBackdrop: true }">
</ngx-loading>